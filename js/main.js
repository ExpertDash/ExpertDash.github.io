var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var Gravity_1, Thermodynamics_1;
import ECS, { Component, System } from "./ecs.js";
const World = new ECS();
let Transform = class Transform extends Component {
    constructor(x, y) {
        super();
        this.position = [0, 0];
        this.rotation = 0;
        this.scale = 1;
        this.position = [x, y];
    }
};
Transform = __decorate([
    World.register.component(),
    __metadata("design:paramtypes", [Number, Number])
], Transform);
let Motion = class Motion extends Component {
    constructor(mass) {
        super();
        this.velocity = [0, 0];
        this.acceleration = [0, 0];
        this.mass = mass;
    }
};
Motion = __decorate([
    World.register.component(),
    __metadata("design:paramtypes", [Number])
], Motion);
let Temperature = class Temperature extends Component {
    constructor(value) {
        super();
        this.value = value;
    }
};
Temperature = __decorate([
    World.register.component(),
    __metadata("design:paramtypes", [Number])
], Temperature);
let Movement = class Movement extends System {
    update(entities) {
        entities.forEach((transform, motion) => {
            let [x, y] = transform.position;
            let [vx, vy] = motion.velocity;
            let [ax, ay] = motion.acceleration;
            motion.velocity = [vx + ax, vy + ay];
            motion.acceleration = [0, 0];
            transform.position = [x + vx, y + vy];
        }, Transform, Motion);
    }
};
Movement = __decorate([
    World.register.system()
], Movement);
let Gravity = Gravity_1 = class Gravity extends System {
    constructor(acceleration) {
        super();
        this.acceleration = acceleration;
    }
    update(entities) {
        entities.forEach(motion => {
            let [x, y] = motion.acceleration;
            motion.acceleration = [x, y - this.acceleration];
        }, Motion);
    }
};
Gravity = Gravity_1 = __decorate([
    World.register.system({ before: [Movement] }, 9.8),
    __metadata("design:paramtypes", [Number])
], Gravity);
let Thermodynamics = Thermodynamics_1 = class Thermodynamics extends System {
    update(entities) {
        let es = [...entities.with(Motion, Transform, Temperature)];
        for (let i = es.length - 1; i >= 0; i--) {
            let [transform1, temperature1] = [es[i].get(Transform), es[i].get(Temperature)];
            for (let j = i - 1; j >= 0; j--) {
                let [transform2, temperature2] = [es[j].get(Transform), es[j].get(Temperature)];
                let [dx, dy] = [transform2.position[0] - transform1.position[0], transform2.position[1] - transform1.position[1]];
                let d2 = dx * dx + dy * dy;
                let f = 1 / d2;
                temperature1.value += (temperature2.value - temperature1.value) * f;
                temperature2.value += (temperature1.value - temperature2.value) * f;
            }
        }
    }
};
Thermodynamics = Thermodynamics_1 = __decorate([
    World.register.system({ after: [Movement] })
], Thermodynamics);
World.entities.create(new Transform(0, 0), new Motion(60), new Temperature(90));
World.entities.create(new Transform(10, 0), new Motion(60), new Temperature(40));
console.log(...World.systems);
console.log();
for (let i = 0; i < 5; i++) {
    if (i != 0)
        World.step();
    console.log([...World.entities.with(Temperature)].map(e => `${e.get(Temperature).value}`));
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFpbi5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uL3NyYy9tYWluLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFBQSxPQUFPLEdBQUcsRUFBRSxFQUFXLFNBQVMsRUFBRSxNQUFNLEVBQUMsTUFBTSxVQUFVLENBQUE7QUFFekQsTUFBTSxLQUFLLEdBQVEsSUFBSSxHQUFHLEVBQUUsQ0FBQTtBQUc1QixJQUFNLFNBQVMsR0FBZixNQUFNLFNBQVUsU0FBUSxTQUFTO0lBS2hDLFlBQW1CLENBQVMsRUFBRSxDQUFTO1FBQ3RDLEtBQUssRUFBRSxDQUFBO1FBTEQsYUFBUSxHQUFxQixDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQTtRQUNuQyxhQUFRLEdBQVcsQ0FBQyxDQUFBO1FBQ3BCLFVBQUssR0FBVyxDQUFDLENBQUE7UUFJdkIsSUFBSSxDQUFDLFFBQVEsR0FBRyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQTtJQUN2QixDQUFDO0NBQ0QsQ0FBQTtBQVRLLFNBQVM7SUFEZCxLQUFLLENBQUMsUUFBUSxDQUFDLFNBQVMsRUFBRTs7R0FDckIsU0FBUyxDQVNkO0FBR0QsSUFBTSxNQUFNLEdBQVosTUFBTSxNQUFPLFNBQVEsU0FBUztJQUs3QixZQUFtQixJQUFZO1FBQzlCLEtBQUssRUFBRSxDQUFBO1FBSkQsYUFBUSxHQUFxQixDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQTtRQUNuQyxpQkFBWSxHQUFxQixDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQTtRQUk3QyxJQUFJLENBQUMsSUFBSSxHQUFHLElBQUksQ0FBQTtJQUNqQixDQUFDO0NBQ0QsQ0FBQTtBQVRLLE1BQU07SUFEWCxLQUFLLENBQUMsUUFBUSxDQUFDLFNBQVMsRUFBRTs7R0FDckIsTUFBTSxDQVNYO0FBR0QsSUFBTSxXQUFXLEdBQWpCLE1BQU0sV0FBWSxTQUFRLFNBQVM7SUFHbEMsWUFBbUIsS0FBYTtRQUMvQixLQUFLLEVBQUUs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LE1BQU0sQ0FBQyxFQUFFLENBQUMsRUFBRSxJQUFJLFdBQVcsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFBO0FBRWhGLE9BQU8sQ0FBQyxHQUFHLENBQUMsR0FBRyxLQUFLLENBQUMsT0FBTyxDQUFDLENBQUE7QUFDN0IsT0FBTyxDQUFDLEdBQUcsRUFBRSxDQUFBO0FBRWIsS0FBSSxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEVBQUUsRUFBRTtJQUMxQixJQUFHLENBQUMsSUFBSSxDQUFDO1FBQ1IsS0FBSyxDQUFDLElBQUksRUFBRSxDQUFBO0lBRWIsT0FBTyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEdBQUcsS0FBSyxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLENBQUMsV0FBVyxDQUFDLENBQUMsS0FBSyxFQUFFLENBQUMsQ0FBQyxDQUFBO0NBQzFGIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IEVDUywge0VudGl0aWVzLCBDb21wb25lbnQsIFN5c3RlbX0gZnJvbSBcIi4vZWNzLmpzXCJcclxuXHJcbmNvbnN0IFdvcmxkOiBFQ1MgPSBuZXcgRUNTKClcclxuXHJcbkBXb3JsZC5yZWdpc3Rlci5jb21wb25lbnQoKVxyXG5jbGFzcyBUcmFuc2Zvcm0gZXh0ZW5kcyBDb21wb25lbnQge1xyXG5cdHB1YmxpYyBwb3NpdGlvbjogW251bWJlciwgbnVtYmVyXSA9IFswLCAwXVxyXG5cdHB1YmxpYyByb3RhdGlvbjogbnVtYmVyID0gMFxyXG5cdHB1YmxpYyBzY2FsZTogbnVtYmVyID0gMVxyXG5cclxuXHRwdWJsaWMgY29uc3RydWN0b3IoeDogbnVtYmVyLCB5OiBudW1iZXIpIHtcclxuXHRcdHN1cGVyKClcclxuXHRcdHRoaXMucG9zaXRpb24gPSBbeCwgeV1cclxuXHR9XHJcbn1cclxuXHJcbkBXb3JsZC5yZWdpc3Rlci5jb21wb25lbnQoKVxyXG5jbGFzcyBNb3Rpb24gZXh0ZW5kcyBDb21wb25lbnQge1xyXG5cdHB1YmxpYyBtYXNzOiBudW1iZXJcclxuXHRwdWJsaWMgdmVsb2NpdHk6IFtudW1iZXIsIG51bWJlcl0gPSBbMCwgMF1cclxuXHRwdWJsaWMgYWNjZWxlcmF0aW9uOiBbbnVtYmVyLCBudW1iZXJdID0gWzAsIDBdXHJcblxyXG5cdHB1YmxpYyBjb25zdHJ1Y3RvcihtYXNzOiBudW1iZXIpIHtcclxuXHRcdHN1cGVyKClcclxuXHRcdHRoaXMubWFzcyA9IG1hc3NcclxuXHR9XHJcbn1cclxuXHJcbkBXb3JsZC5yZWdpc3Rlci5jb21wb25lbnQoKVxyXG5jbGFzcyBUZW1wZXJhdHVyZSBleHRlbmRzIENvbXBvbmVudCB7XHJcblx0cHVibGljIHZhbHVlOiBudW1iZXJcclxuXHJcblx0cHVibGljIGNvbnN0cnVjdG9yKHZhbHVlOiBudW1iZXIpIHtcclxuXHRcdHN1cGVyKClcclxuXHRcdHRoaXMudmFsdWUgPSB2YWx1ZVxyXG5cdH1cclxufVxyXG5cclxuQFdvcmxkLnJlZ2lzdGVyLnN5c3RlbSgpXHJcbmNsYXNzIE1vdmVtZW50IGV4dGVuZHMgU3lzdGVtIHtcclxuXHRwdWJsaWMgb3ZlcnJpZGUgdXBkYXRlKGVudGl0aWVzOiBFbnRpdGllcyk6IHZvaWQge1xyXG5cdFx0ZW50aXRpZXMuZm9yRWFjaCgodHJhbnNmb3JtLCBtb3Rpb24pID0+IHtcclxuXHRcdFx0bGV0IFt4LCB5XSA9IHRyYW5zZm9ybS5wb3NpdGlvblxyXG5cdFx0XHRsZXQgW3Z4LCB2eV0gPSBtb3Rpb24udmVsb2NpdHlcclxuXHRcdFx0bGV0IFtheCwgYXldID0gbW90aW9uLmFjY2VsZXJhdGlvblxyXG5cclxuXHRcdFx0bW90aW9uLnZlbG9jaXR5ID0gW3Z4ICsgYXgsIHZ5ICsgYXldXHJcblx0XHRcdG1vdGlvbi5hY2NlbGVyYXRpb24gPSBbMCwgMF1cclxuXHRcdFx0dHJhbnNmb3JtLnBvc2l0aW9uID0gW3ggKyB2eCwgeSArIHZ5XVxyXG5cdFx0fSwgVHJhbnNmb3JtLCBNb3Rpb24pXHJcblx0fVxyXG59XHJcblxyXG5AV29ybGQucmVnaXN0ZXIuc3lzdGVtPHR5cGVvZiBHcmF2aXR5Pih7YmVmb3JlOiBbTW92ZW1lbnRdfSwgOS44KVxyXG5jbGFzcyBHcmF2aXR5IGV4dGVuZHMgU3lzdGVtIHtcclxuXHRwdWJsaWMgYWNjZWxlcmF0aW9uOiBudW1iZXJcclxuXHJcblx0cHVibGljIGNvbnN0cnVjdG9yKGFjY2VsZXJhdGlvbjogbnVtYmVyKSB7XHJcblx0XHRzdXBlcigpXHJcblx0XHR0aGlzLmFjY2VsZXJhdGlvbiA9IGFjY2VsZXJhdGlvblxyXG5cdH1cclxuXHJcblx0cHVibGljIG92ZXJyaWRlIHVwZGF0ZShlbnRpdGllczogRW50aXRpZXMpOiB2b2lkIHtcclxuXHRcdGVudGl0aWVzLmZvckVhY2gobW90aW9uID0+IHtcclxuXHRcdFx0bGV0IFt4LCB5XSA9IG1vdGlvbi5hY2NlbGVyYXRpb25cclxuXHRcdFx0bW90aW9uLmFjY2VsZXJhdGlvbiA9IFt4LCB5IC0gdGhpcy5hY2NlbGVyYXRpb25dXHJcblx0XHR9LCBNb3Rpb24pXHJcblx0fVxyXG59XHJcblxyXG5AV29ybGQucmVnaXN0ZXIuc3lzdGVtPHR5cGVvZiBUaGVybW9keW5hbWljcz4oe2FmdGVyOiBbTW92ZW1lbnRdfSlcclxuY2xhc3MgVGhlcm1vZHluYW1pY3MgZXh0ZW5kcyBTeXN0ZW0ge1xyXG5cdHB1YmxpYyB1cGRhdGUoZW50aXRpZXM6IEVudGl0aWVzKTogdm9pZCB7XHJcblx0XHRsZXQgZXMgPSBbLi4uZW50aXRpZXMud2l0aChNb3Rpb24sIFRyYW5zZm9ybSwgVGVtcGVyYXR1cmUpXVxyXG5cclxuXHRcdGZvcihsZXQgaSA9IGVzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XHJcblx0XHRcdGxldCBbdHJhbnNmb3JtMSwgdGVtcGVyYXR1cmUxXSA9IFtlc1tpXS5nZXQoVHJhbnNmb3JtKSwgZXNbaV0uZ2V0KFRlbXBlcmF0dXJlKV1cclxuXHJcblx0XHRcdGZvcihsZXQgaiA9IGkgLSAxOyBqID49IDA7IGotLSkge1xyXG5cdFx0XHRcdGxldCBbdHJhbnNmb3JtMiwgdGVtcGVyYXR1cmUyXSA9IFtlc1tqXS5nZXQoVHJhbnNmb3JtKSwgZXNbal0uZ2V0KFRlbXBlcmF0dXJlKV1cclxuXHJcblx0XHRcdFx0bGV0IFtkeCwgZHldID0gW3RyYW5zZm9ybTIucG9zaXRpb25bMF0gLSB0cmFuc2Zvcm0xLnBvc2l0aW9uWzBdLCB0cmFuc2Zvcm0yLnBvc2l0aW9uWzFdIC0gdHJhbnNmb3JtMS5wb3NpdGlvblsxXV1cclxuXHRcdFx0XHRsZXQgZDIgPSBkeCAqIGR4ICsgZHkgKiBkeVxyXG5cdFx0XHRcdGxldCBmID0gMSAvIGQyXHJcblxyXG5cdFx0XHRcdHRlbXBlcmF0dXJlMS52YWx1ZSArPSAodGVtcGVyYXR1cmUyLnZhbHVlIC0gdGVtcGVyYXR1cmUxLnZhbHVlKSAqIGZcclxuXHRcdFx0XHR0ZW1wZXJhdHVyZTIudmFsdWUgKz0gKHRlbXBlcmF0dXJlMS52YWx1ZSAtIHRlbXBlcmF0dXJlMi52YWx1ZSkgKiBmXHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHR9XHJcbn1cclxuXHJcbldvcmxkLmVudGl0aWVzLmNyZWF0ZShuZXcgVHJhbnNmb3JtKDAsIDApLCBuZXcgTW90aW9uKDYwKSwgbmV3IFRlbXBlcmF0dXJlKDkwKSlcclxuV29ybGQuZW50aXRpZXMuY3JlYXRlKG5ldyBUcmFuc2Zvcm0oMTAsIDApLCBuZXcgTW90aW9uKDYwKSwgbmV3IFRlbXBlcmF0dXJlKDQwKSlcclxuXHJcbmNvbnNvbGUubG9nKC4uLldvcmxkLnN5c3RlbXMpXHJcbmNvbnNvbGUubG9nKClcclxuXHJcbmZvcihsZXQgaSA9IDA7IGkgPCA1OyBpKyspIHtcclxuXHRpZihpICE9IDApXHJcblx0XHRXb3JsZC5zdGVwKClcclxuXHJcblx0Y29uc29sZS5sb2coWy4uLldvcmxkLmVudGl0aWVzLndpdGgoVGVtcGVyYXR1cmUpXS5tYXAoZSA9PiBgJHtlLmdldChUZW1wZXJhdHVyZSkudmFsdWV9YCkpXHJcbn0iXX0=